{"ast":null,"code":"import { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { DateTime } from 'luxon';\nimport { environment } from 'src/environments/environment.development';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/conversion-api.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction ListComponent_section_12_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵelement(1, \"img\", 10);\n    i0.ɵɵelementStart(2, \"div\", 11)(3, \"label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"label\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const k_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", k_r2.path, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(k_r2.createdAt);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(k_r2.user);\n  }\n}\nfunction ListComponent_section_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"section\", 7);\n    i0.ɵɵtemplate(1, ListComponent_section_12_div_1_Template, 7, 3, \"div\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.images);\n  }\n}\nexport class ListComponent {\n  //#endregion\n  //#region Constructors\n  constructor(conversionApiService) {\n    this.conversionApiService = conversionApiService;\n    this.images = [];\n    this.loading = false;\n    this.#init();\n  }\n  get startDate() {\n    return this.frmList.controls['startDate'].value;\n  }\n  get endDate() {\n    return this.frmList.controls['endDate'].value;\n  }\n  //#endregion\n  //#region Methods\n  #init() {\n    this.frmList = new FormGroup({\n      startDate: new FormControl('', [Validators.required]),\n      endDate: new FormControl('', [Validators.required])\n    });\n  }\n  #search() {\n    this.images = [];\n    this.loading = true;\n    this.conversionApiService.search(this.startDate, this.endDate).then(val => {\n      const {\n        success,\n        object\n      } = val;\n      if (!success) {\n        // TODO: Mostrar mensaje\n        return;\n      }\n      object.forEach(x => {\n        x.createdAt = DateTime.fromISO(x.createdAt).toLocal().toFormat('yyyy/LL/dd HH:mm:ss');\n        x.path = `${environment.resources}${x.path}`;\n      });\n      this.images = object;\n    }).catch(err => {\n      // TODO: Mostrar mensaje\n      console.log('err :>> ', err);\n    }).finally(() => {\n      this.loading = false;\n    });\n  }\n  validateForm() {\n    if (this.frmList.invalid) {\n      return this.frmList.markAllAsTouched();\n    }\n    this.#search();\n  }\n  static #_ = this.ɵfac = function ListComponent_Factory(t) {\n    return new (t || ListComponent)(i0.ɵɵdirectiveInject(i1.ConversionApiService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ListComponent,\n    selectors: [[\"app-list\"]],\n    decls: 13,\n    vars: 3,\n    consts: [[1, \"flex\", \"flex-col\", \"gap-2\"], [3, \"formGroup\"], [1, \"text-white\", \"font-light\", \"text-sm\"], [\"type\", \"datetime-local\", \"placeholder\", \"Fecha inicial\", \"formControlName\", \"startDate\", 1, \"bg-transparent\", \"text-white\", \"rounded-md\", \"border-2\", \"border-gray-600\", \"py-1\", \"px-2\", \"hover:border-violet-400\", \"w-full\"], [\"type\", \"datetime-local\", \"placeholder\", \"Fecha final\", \"formControlName\", \"endDate\", 1, \"bg-transparent\", \"text-white\", \"rounded-md\", \"border-2\", \"border-gray-600\", \"py-1\", \"px-2\", \"hover:border-violet-400\", \"w-full\"], [\"type\", \"button\", 1, \"mt-5\", \"pointer-events-auto\", \"rounded-md\", \"bg-violet-600\", \"px-3\", \"py-2\", \"text-[0.8125rem]\", \"font-semibold\", \"leading-5\", \"text-white\", \"hover:bg-violet-500\", \"w-full\", 3, \"click\"], [\"class\", \"flex flex-col gap-4 mt-4\", 4, \"ngIf\"], [1, \"flex\", \"flex-col\", \"gap-4\", \"mt-4\"], [\"class\", \" flex flex-row items-center gap-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"flex\", \"flex-row\", \"items-center\", \"gap-4\"], [\"title\", \"Imagen subida por el usuario\", 1, \"w-24\", \"rounded-2xl\", 3, \"src\"], [1, \"flex\", \"flex-col\", \"text-white\"]],\n    template: function ListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0)(1, \"form\", 1)(2, \"div\")(3, \"label\", 2);\n        i0.ɵɵtext(4, \" Fecha inicial \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(5, \"input\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\")(7, \"label\", 2);\n        i0.ɵɵtext(8, \" Fecha final \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(9, \"input\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function ListComponent_Template_button_click_10_listener() {\n          return ctx.validateForm();\n        });\n        i0.ɵɵtext(11);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(12, ListComponent_section_12_Template, 2, 1, \"section\", 6);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.frmList);\n        i0.ɵɵadvance(10);\n        i0.ɵɵtextInterpolate1(\" \", ctx.loading ? \"Cargando...\" : \"Consular\", \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.images.length);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName],\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["FormGroup","FormControl","Validators","DateTime","environment","i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","k_r2","path","ɵɵsanitizeUrl","ɵɵtextInterpolate","createdAt","user","ɵɵtemplate","ListComponent_section_12_div_1_Template","ctx_r0","images","ListComponent","constructor","conversionApiService","loading","init","startDate","frmList","controls","value","endDate","#init","required","search","#search","then","val","success","object","forEach","x","fromISO","toLocal","toFormat","resources","catch","err","console","log","finally","validateForm","invalid","markAllAsTouched","_","ɵɵdirectiveInject","i1","ConversionApiService","_2","selectors","decls","vars","consts","template","ListComponent_Template","rf","ctx","ɵɵlistener","ListComponent_Template_button_click_10_listener","ListComponent_section_12_Template","ɵɵtextInterpolate1","length"],"sources":["C:\\Users\\M1503\\Documents\\PROYECTOS\\LoggroFront\\src\\app\\components\\list\\list.component.ts","C:\\Users\\M1503\\Documents\\PROYECTOS\\LoggroFront\\src\\app\\components\\list\\list.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { ConversionApiService } from '../../services/conversion-api.service';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { GlobalResponse, SearchResponse } from 'src/app/utils/types';\nimport { DateTime } from 'luxon'\nimport { environment } from 'src/environments/environment.development';\n\n@Component({\n  selector: 'app-list',\n  templateUrl: './list.component.html',\n  styleUrls: ['./list.component.css']\n})\nexport class ListComponent {\n\n  //#region Properties\n\n  frmList!: FormGroup\n\n  images: SearchResponse[] = []\n\n  loading = false\n\n  //#endregion\n\n  //#region Constructors\n\n  constructor(\n    private conversionApiService: ConversionApiService\n  ) {\n\n    this.#init()\n  }\n\n  get startDate() { return this.frmList.controls['startDate'].value }\n  get endDate() { return this.frmList.controls['endDate'].value }\n\n  //#endregion\n\n  //#region Methods\n\n  #init() {\n\n    this.frmList = new FormGroup({\n      startDate: new FormControl('', [Validators.required]),\n      endDate: new FormControl('', [Validators.required]),\n    })\n  }\n\n  #search() {\n\n    this.images = []\n\n    this.loading = true\n\n    this.conversionApiService\n      .search(this.startDate, this.endDate)\n      .then((val: GlobalResponse<SearchResponse[]>) => {\n\n        const { success, object } = val\n\n        if (!success) {\n          // TODO: Mostrar mensaje\n          return\n        }\n\n        object\n          .forEach(x => {\n            x.createdAt = DateTime.fromISO(x.createdAt).toLocal().toFormat('yyyy/LL/dd HH:mm:ss')\n            x.path = `${environment.resources}${x.path}`\n          })\n\n        this.images = object\n      })\n      .catch(err => {\n        // TODO: Mostrar mensaje\n        console.log('err :>> ', err);\n      })\n      .finally(() => {\n\n        this.loading = false\n      })\n  }\n\n  validateForm() {\n\n    if (this.frmList.invalid) {\n      return this.frmList.markAllAsTouched()\n    }\n\n    this.#search()\n  }\n\n  //#endregion\n}\n","<section class=\"flex flex-col gap-2\">\n\n  <form [formGroup]=\"frmList\">\n\n    <div>\n\n      <label class=\"text-white font-light text-sm\">\n        Fecha inicial\n      </label>\n\n      <input type='datetime-local' placeholder='Fecha inicial' formControlName=\"startDate\"\n        class='bg-transparent text-white rounded-md border-2 border-gray-600 py-1 px-2 hover:border-violet-400 w-full' />\n\n    </div>\n\n    <div>\n\n      <label class=\"text-white font-light text-sm\">\n        Fecha final\n      </label>\n\n      <input type='datetime-local' placeholder='Fecha final' formControlName=\"endDate\"\n        class='bg-transparent text-white rounded-md border-2 border-gray-600 py-1 px-2 hover:border-violet-400 w-full' />\n\n    </div>\n\n    <button type=\"button\" (click)=\"validateForm()\"\n      class=\"mt-5 pointer-events-auto rounded-md bg-violet-600 px-3 py-2 text-[0.8125rem] font-semibold leading-5 text-white hover:bg-violet-500 w-full\">\n      {{ loading ? 'Cargando...' : 'Consular' }}\n    </button>\n\n  </form>\n\n</section>\n\n<section *ngIf=\"images.length\" class=\"flex flex-col gap-4 mt-4\">\n\n  <div *ngFor=\"let k of images\" class=\" flex flex-row items-center gap-4\">\n\n    <img [src]=\"k.path\" title=\"Imagen subida por el usuario\" class=\"w-24 rounded-2xl\" />\n\n    <div class=\"flex flex-col text-white\">\n      <label>{{k.createdAt}}</label>\n      <label>{{k.user}}</label>\n    </div>\n\n  </div>\n\n</section>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}